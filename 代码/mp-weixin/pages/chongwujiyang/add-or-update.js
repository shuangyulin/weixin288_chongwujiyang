(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chongwujiyang/add-or-update"],{2213:function(n,e,i){"use strict";i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return t})),i.d(e,"a",(function(){return u}));var u={wPicker:function(){return Promise.all([i.e("common/vendor"),i.e("components/w-picker/w-picker")]).then(i.bind(null,"2053"))}},r=function(){var n=this,e=n.$createElement;n._self._c},t=[]},"307e":function(n,e,i){"use strict";i.r(e);var u=i("2213"),r=i("abff");for(var t in r)"default"!==t&&function(n){i.d(e,n,(function(){return r[n]}))}(t);i("b5af");var o,a=i("f0c5"),g=Object(a["a"])(r["default"],u["b"],u["c"],!1,null,"3eff829a",null,!1,u["a"],o);e["default"]=g.exports},"45e7":function(n,e,i){"use strict";(function(n){i("8b00");u(i("66fd"));var e=u(i("307e"));function u(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,i("543d")["createPage"])},"58c4":function(n,e,i){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(i("a34a"));function r(n){return n&&n.__esModule?n:{default:n}}function t(n,e,i,u,r,t,o){try{var a=n[t](o),g=a.value}catch(c){return void i(c)}a.done?e(g):Promise.resolve(g).then(u,r)}function o(n){return function(){var e=this,i=arguments;return new Promise((function(u,r){var o=n.apply(e,i);function a(n){t(o,u,r,a,g,"next",n)}function g(n){t(o,u,r,a,g,"throw",n)}a(void 0)}))}}var a=function(){Promise.all([i.e("common/vendor"),i.e("components/w-picker/w-picker")]).then(function(){return resolve(i("2053"))}.bind(null,i)).catch(i.oe)},g={data:function(){return{cross:"",ruleForm:{jiyangdanhao:this.getUUID(),chongwumingcheng:"",chongwuzhonglei:"",chongwuxingbie:"",shifoujueyu:"",chongwunianling:"",kaishishijian:"",jiyangshizhang:"",tuoguanfeiyong:"",zongfeiyong:"",chongzhuxingming:"",chongzhuzhanghao:"",yuyueshijian:"",jiyangyuanyin:"",beizhu:"",ispay:""},chongwuzhongleiOptions:[],chongwuzhongleiIndex:0,chongwuxingbieOptions:[],chongwuxingbieIndex:0,shifoujueyuOptions:[],shifoujueyuIndex:0,user:{},ro:{jiyangdanhao:!1,chongwumingcheng:!1,chongwuzhonglei:!1,chongwuxingbie:!1,shifoujueyu:!1,chongwunianling:!1,kaishishijian:!1,jiyangshizhang:!1,tuoguanfeiyong:!1,zongfeiyong:!1,chongzhuxingming:!1,chongzhuzhanghao:!1,yuyueshijian:!1,jiyangyuanyin:!1,beizhu:!1,ispay:!1}}},components:{wPicker:a},computed:{baseUrl:function(){return this.$base.url},zongfeiyong:{get:function(){return 1*this.ruleForm.jiyangshizhang*this.ruleForm.tuoguanfeiyong}}},onLoad:function(e){var i=this;return o(u.default.mark((function r(){var t,o,a,g;return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i.ruleForm.yuyueshijian=i.$utils.getCurDateTime(),t=n.getStorageSync("nowTable"),r.next=4,i.$api.session(t);case 4:return o=r.sent,i.user=o.data,i.ruleForm.chongzhuxingming=i.user.chongzhuxingming,i.ro.chongzhuxingming=!0,i.ruleForm.chongzhuzhanghao=i.user.chongzhuzhanghao,i.ro.chongzhuzhanghao=!0,r.next=12,i.$api.option("chongwuzhonglei","chongwuzhonglei",{});case 12:if(o=r.sent,i.chongwuzhongleiOptions=o.data,i.chongwuxingbieOptions="公,母".split(","),i.shifoujueyuOptions="是,否".split(","),i.ruleForm.userid=n.getStorageSync("userid"),e.refid&&(i.ruleForm.refid=e.refid,i.ruleForm.nickname=n.getStorageSync("nickname")),!e.id){r.next=24;break}return i.ruleForm.id=e.id,r.next=22,i.$api.info("chongwujiyang",i.ruleForm.id);case 22:o=r.sent,i.ruleForm=o.data;case 24:if(i.cross=e.cross,!e.cross){r.next=92;break}a=n.getStorageSync("crossObj"),r.t0=u.default.keys(a);case 28:if((r.t1=r.t0()).done){r.next=92;break}if(g=r.t1.value,"jiyangdanhao"!=g){r.next=34;break}return i.ruleForm.jiyangdanhao=a[g],i.ro.jiyangdanhao=!0,r.abrupt("continue",28);case 34:if("chongwumingcheng"!=g){r.next=38;break}return i.ruleForm.chongwumingcheng=a[g],i.ro.chongwumingcheng=!0,r.abrupt("continue",28);case 38:if("chongwuzhonglei"!=g){r.next=42;break}return i.ruleForm.chongwuzhonglei=a[g],i.ro.chongwuzhonglei=!0,r.abrupt("continue",28);case 42:if("chongwuxingbie"!=g){r.next=46;break}return i.ruleForm.chongwuxingbie=a[g],i.ro.chongwuxingbie=!0,r.abrupt("continue",28);case 46:if("shifoujueyu"!=g){r.next=50;break}return i.ruleForm.shifoujueyu=a[g],i.ro.shifoujueyu=!0,r.abrupt("continue",28);case 50:if("chongwunianling"!=g){r.next=54;break}return i.ruleForm.chongwunianling=a[g],i.ro.chongwunianling=!0,r.abrupt("continue",28);case 54:if("kaishishijian"!=g){r.next=58;break}return i.ruleForm.kaishishijian=a[g],i.ro.kaishishijian=!0,r.abrupt("continue",28);case 58:if("jiyangshizhang"!=g){r.next=62;break}return i.ruleForm.jiyangshizhang=a[g],i.ro.jiyangshizhang=!0,r.abrupt("continue",28);case 62:if("tuoguanfeiyong"!=g){r.next=66;break}return i.ruleForm.tuoguanfeiyong=a[g],i.ro.tuoguanfeiyong=!0,r.abrupt("continue",28);case 66:if("zongfeiyong"!=g){r.next=70;break}return i.ruleForm.zongfeiyong=a[g],i.ro.zongfeiyong=!0,r.abrupt("continue",28);case 70:if("chongzhuxingming"!=g){r.next=74;break}return i.ruleForm.chongzhuxingming=a[g],i.ro.chongzhuxingming=!0,r.abrupt("continue",28);case 74:if("chongzhuzhanghao"!=g){r.next=78;break}return i.ruleForm.chongzhuzhanghao=a[g],i.ro.chongzhuzhanghao=!0,r.abrupt("continue",28);case 78:if("yuyueshijian"!=g){r.next=82;break}return i.ruleForm.yuyueshijian=a[g],i.ro.yuyueshijian=!0,r.abrupt("continue",28);case 82:if("jiyangyuanyin"!=g){r.next=86;break}return i.ruleForm.jiyangyuanyin=a[g],i.ro.jiyangyuanyin=!0,r.abrupt("continue",28);case 86:if("beizhu"!=g){r.next=90;break}return i.ruleForm.beizhu=a[g],i.ro.beizhu=!0,r.abrupt("continue",28);case 90:r.next=28;break;case 92:i.styleChange();case 93:case"end":return r.stop()}}),r)})))()},methods:{styleChange:function(){this.$nextTick((function(){}))},kaishishijianChange:function(n){this.ruleForm.kaishishijian=n.target.value,this.$forceUpdate()},yuyueshijianConfirm:function(n){console.log(n),this.ruleForm.yuyueshijian=n.result,this.$forceUpdate()},chongwuzhongleiChange:function(n){this.chongwuzhongleiIndex=n.target.value,this.ruleForm.chongwuzhonglei=this.chongwuzhongleiOptions[this.chongwuzhongleiIndex]},chongwuxingbieChange:function(n){this.chongwuxingbieIndex=n.target.value,this.ruleForm.chongwuxingbie=this.chongwuxingbieOptions[this.chongwuxingbieIndex]},shifoujueyuChange:function(n){this.shifoujueyuIndex=n.target.value,this.ruleForm.shifoujueyu=this.shifoujueyuOptions[this.shifoujueyuIndex]},getUUID:function(){return(new Date).getTime()},onSubmitTap:function(){var e=this;return o(u.default.mark((function i(){var r,t,o,a,g,c,s,h,l,f;return u.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.ruleForm.zongfeiyong=e.zongfeiyong,!e.ruleForm.jiyangshizhang||e.$validate.isIntNumer(e.ruleForm.jiyangshizhang)){i.next=4;break}return e.$utils.msg("寄养时长应输入整数"),i.abrupt("return");case 4:if(!e.ruleForm.tuoguanfeiyong||e.$validate.isNumber(e.ruleForm.tuoguanfeiyong)){i.next=7;break}return e.$utils.msg("托管费用应输入数字"),i.abrupt("return");case 7:if(!e.ruleForm.zongfeiyong||e.$validate.isNumber(e.ruleForm.zongfeiyong)){i.next=10;break}return e.$utils.msg("总费用应输入数字"),i.abrupt("return");case 10:if(!e.cross){i.next=26;break}if(a=n.getStorageSync("statusColumnName"),g=n.getStorageSync("statusColumnValue"),""==a){i.next=26;break}if(c=n.getStorageSync("crossObj"),a.startsWith("[")){i.next=22;break}for(s in c)s==a&&(c[s]=g);return h=n.getStorageSync("crossTable"),i.next=20,e.$api.update("".concat(h),c);case 20:i.next=26;break;case 22:r=Number(n.getStorageSync("userid")),t=c["id"],o=n.getStorageSync("statusColumnName"),o=o.replace(/\[/,"").replace(/\]/,"");case 26:if(!t||!r){i.next=48;break}return e.ruleForm.crossuserid=r,e.ruleForm.crossrefid=t,l={page:1,limit:10,crossuserid:r,crossrefid:t},i.next=32,e.$api.list("chongwujiyang",l);case 32:if(f=i.sent,!(f.data.total>=o)){i.next=38;break}return e.$utils.msg(n.getStorageSync("tips")),i.abrupt("return",!1);case 38:if(!e.ruleForm.id){i.next=43;break}return i.next=41,e.$api.update("chongwujiyang",e.ruleForm);case 41:i.next=45;break;case 43:return i.next=45,e.$api.add("chongwujiyang",e.ruleForm);case 45:e.$utils.msgBack("提交成功");case 46:i.next=56;break;case 48:if(!e.ruleForm.id){i.next=53;break}return i.next=51,e.$api.update("chongwujiyang",e.ruleForm);case 51:i.next=55;break;case 53:return i.next=55,e.$api.add("chongwujiyang",e.ruleForm);case 55:e.$utils.msgBack("提交成功");case 56:case"end":return i.stop()}}),i)})))()},optionsChange:function(n){this.index=n.target.value},bindDateChange:function(n){this.date=n.target.value},getDate:function(n){var e=new Date,i=e.getFullYear(),u=e.getMonth()+1,r=e.getDate();return"start"===n?i-=60:"end"===n&&(i+=2),u=u>9?u:"0"+u,r=r>9?r:"0"+r,"".concat(i,"-").concat(u,"-").concat(r)},toggleTab:function(n){this.$refs[n].show()}}};e.default=g}).call(this,i("543d")["default"])},abff:function(n,e,i){"use strict";i.r(e);var u=i("58c4"),r=i.n(u);for(var t in u)"default"!==t&&function(n){i.d(e,n,(function(){return u[n]}))}(t);e["default"]=r.a},b5af:function(n,e,i){"use strict";var u=i("ee79"),r=i.n(u);r.a},ee79:function(n,e,i){}},[["45e7","common/runtime","common/vendor"]]]);